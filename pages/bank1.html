<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Webex Bank</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
    <link rel="stylesheet" href="../style/main.css">
</head>

<body>
	<!-- 定数を読み込み -->
	<script type="text/javascript" src="../js/systeminit.js"></script>
	<script type="text/javascript" src="../js/systeminit_bank.js"></script>
	<div class="header">
		<header id="siteHeader">
			<p class="site_logo"><img src="../img/logo-bank.png" alt="Webex" height="80px"></p>
		</header>
	</div>
	<div class="container">
		<br>
		<form name="form1">
		<input type="text" style="width: 250px; height: 35px;" id="patientID" placeholder="会員番号"><br>
			<input type="text" style="width: 250px; height: 35px;" id="birhday" placeholder="生年月日"><br>
			<select name="selectdp" id="select-department" style="width: 250px; height: 35px;" onchange="departmentChange();">
			<option value="" disabled selected>ご用件を選択</option>
				<script type='text/javascript'>
					let i = 0;
					let selText = '';
					for( i = 0 ; i < department.length ; i ++ ) {
						selText = selText + '<option value="' + department[i][0] + '">' + department[i][1] + '</option>';
					}
					document.write(selText);
				</script>
			</select>
		</form>
		<br>
	</div>
<script type='text/javascript'>
<!-- ドロップボックス変更時 -->
function departmentChange() {
	// ご用件
	let department = document.form1.selectdp;
	let num = department.selectedIndex;
	let ptIDstr = document.getElementById("patientID").value;
	let btdaystr = document.getElementById("birhday").value;

	// 値(数値)から値(value値)を取得
	const depstr = department.options[num].value;
	
	parent.frames[1].location.href = ( fileName + "2.html?ptId=" + ptIDstr + "&btday=" + btdaystr + "&dep_cd=" + depstr + "&moveBase=0&move=0");
}
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ja.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/clipboard.js/1.5.13/clipboard.min.js"></script>
<script>
flatpickr("#flatpickr", {
	locale:"ja",
	minDate:"today",
	enableTime: true,
	enableSeconds: true,
	defaultHour: 15,
	defaultMinute: 30,
	hourIncrement: 3,
	minuteIncrement: 15
});
</script>
<script>
	var clipboard = new Clipboard('.copy_btn');
</script>

	</body>
</html>